import{j as e,B as x,G as s,r as f,w as j,x as m,y as p,l as n,m as o,z as S,C as g,E as b}from"./ui-vendor-BekXbpvv.js";import{r as P}from"./react-vendor-CmdBDJ7C.js";import{u as B,b as G}from"./redux-vendor-D-krhjMU.js";import{f as F,L,s as R,a as w}from"./index-DbOi_nDC.js";import{G as E}from"./GameCard-BpYf_uYH.js";import"./utils-upsvKRUO.js";function W({filters:r,onFilterChange:t}){const l=c=>a=>{t({...r,[c]:a.target.value})},h=(c,a)=>{t({...r,priceRange:a})};return e.jsx(x,{sx:{mb:3},children:e.jsxs(s,{container:!0,spacing:3,children:[e.jsx(s,{item:!0,xs:12,sm:4,children:e.jsx(f,{fullWidth:!0,label:"Поиск игр",value:r.search,onChange:l("search"),variant:"outlined"})}),e.jsx(s,{item:!0,xs:12,sm:4,children:e.jsxs(j,{fullWidth:!0,children:[e.jsx(m,{children:"Платформа"}),e.jsxs(p,{value:r.platform,label:"Платформа",onChange:l("platform"),children:[e.jsx(n,{value:"",children:"Все"}),e.jsx(n,{value:"PC",children:"PC"}),e.jsx(n,{value:"PS5",children:"PlayStation 5"}),e.jsx(n,{value:"PS4",children:"PlayStation 4"}),e.jsx(n,{value:"XBOX",children:"Xbox Series X|S"}),e.jsx(n,{value:"SWITCH",children:"Nintendo Switch"})]})]})}),e.jsx(s,{item:!0,xs:12,sm:4,children:e.jsxs(j,{fullWidth:!0,children:[e.jsx(m,{children:"Сортировка"}),e.jsxs(p,{value:r.sortBy,label:"Сортировка",onChange:l("sortBy"),children:[e.jsx(n,{value:"popular",children:"По популярности"}),e.jsx(n,{value:"price_asc",children:"По возрастанию цены"}),e.jsx(n,{value:"price_desc",children:"По убыванию цены"}),e.jsx(n,{value:"rating",children:"По рейтингу"}),e.jsx(n,{value:"new",children:"По новизне"})]})]})}),e.jsxs(s,{item:!0,xs:12,children:[e.jsx(o,{gutterBottom:!0,children:"Цена (₽)"}),e.jsx(S,{value:r.priceRange,onChange:h,valueLabelDisplay:"auto",min:0,max:1e4,step:100}),e.jsxs(x,{display:"flex",justifyContent:"space-between",children:[e.jsxs(o,{variant:"body2",color:"text.secondary",children:[r.priceRange[0]," ₽"]}),e.jsxs(o,{variant:"body2",color:"text.secondary",children:[r.priceRange[1]," ₽"]})]})]})]})})}function _(){const r=B(),{games:t=[],isLoading:l,error:h,filters:c,pagination:{page:a,limit:d,total:u}}=G(i=>i.games);P.useEffect(()=>{r(F({page:a,limit:d,filters:c}))},[r,a,d,c]);const v=(i,C)=>{r(R(C))},y=i=>{r(w(i))};return l?e.jsx(L,{}):h?e.jsx(g,{children:e.jsx(x,{textAlign:"center",py:4,children:e.jsx(o,{color:"error",variant:"h6",children:h})})}):e.jsx(g,{children:e.jsxs(x,{py:4,children:[e.jsx(o,{variant:"h4",component:"h1",gutterBottom:!0,children:"Каталог игр"}),e.jsx(W,{filters:c,onFilterChange:y}),e.jsxs(s,{container:!0,spacing:3,mt:2,children:[t==null?void 0:t.map(i=>e.jsx(s,{item:!0,xs:12,sm:6,md:4,lg:3,children:e.jsx(E,{game:i})},i.id)),t.length===0&&!l&&e.jsx(s,{item:!0,xs:12,children:e.jsx(o,{textAlign:"center",color:"text.secondary",children:"Игры не найдены"})})]}),u>d&&e.jsx(x,{display:"flex",justifyContent:"center",mt:4,children:e.jsx(b,{count:Math.ceil(u/d),page:a,onChange:v,color:"primary"})})]})})}export{_ as default};
