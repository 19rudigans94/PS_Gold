import{j as e,L as u,l as f,u as g,m as w,r as i}from"./react-vendor-BB4BkCfL.js";import{L as y,r as j}from"./index-DpTN90_E.js";import"./vendor-Dh_iZ00o.js";import"./redux-vendor-56JQh752.js";import"./mui-vendor-QnVK6N-v.js";const v=({formData:t,errors:a,isLoading:o,onChange:s,onSubmit:l})=>e.jsxs("form",{className:"mt-8 space-y-6",onSubmit:l,children:[e.jsxs("div",{className:"rounded-md shadow-sm -space-y-px",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"name",className:"sr-only",children:"Имя"}),e.jsx("input",{id:"name",name:"name",type:"text",required:!0,value:t.name,onChange:s,className:"appearance-none rounded-none relative block w-full px-3 py-2 border border-gray-300 placeholder-gray-500 text-gray-900 rounded-t-md focus:outline-none focus:ring-blue-500 focus:border-blue-500 focus:z-10 sm:text-sm",placeholder:"Имя"})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"email",className:"sr-only",children:"Email"}),e.jsx("input",{id:"email",name:"email",type:"email",autoComplete:"email",required:!0,value:t.email,onChange:s,className:"appearance-none rounded-none relative block w-full px-3 py-2 border border-gray-300 placeholder-gray-500 text-gray-900 focus:outline-none focus:ring-blue-500 focus:border-blue-500 focus:z-10 sm:text-sm",placeholder:"Email"})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"password",className:"sr-only",children:"Пароль"}),e.jsx("input",{id:"password",name:"password",type:"password",autoComplete:"new-password",required:!0,value:t.password,onChange:s,className:"appearance-none rounded-none relative block w-full px-3 py-2 border border-gray-300 placeholder-gray-500 text-gray-900 focus:outline-none focus:ring-blue-500 focus:border-blue-500 focus:z-10 sm:text-sm",placeholder:"Пароль"}),a.password&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:a.password})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"confirmPassword",className:"sr-only",children:"Подтвердите пароль"}),e.jsx("input",{id:"confirmPassword",name:"confirmPassword",type:"password",autoComplete:"new-password",required:!0,value:t.confirmPassword,onChange:s,className:"appearance-none rounded-none relative block w-full px-3 py-2 border border-gray-300 placeholder-gray-500 text-gray-900 rounded-b-md focus:outline-none focus:ring-blue-500 focus:border-blue-500 focus:z-10 sm:text-sm",placeholder:"Подтвердите пароль"}),a.confirmPassword&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:a.confirmPassword})]})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("input",{id:"agreeToTerms",name:"agreeToTerms",type:"checkbox",checked:t.agreeToTerms,onChange:s,className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"}),e.jsxs("label",{htmlFor:"agreeToTerms",className:"ml-2 block text-sm text-gray-900",children:["Я согласен с"," ",e.jsx(u,{to:"/terms",className:"font-medium text-blue-600 hover:text-blue-500",children:"условиями использования"})]})]}),a.agreeToTerms&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:a.agreeToTerms}),e.jsx("div",{children:e.jsxs("button",{type:"submit",disabled:o,className:"group relative w-full flex justify-center py-2 px-4 border border-transparent text-sm font-medium rounded-md text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 disabled:opacity-50 disabled:cursor-not-allowed",children:[o&&e.jsx(y,{}),o?"Регистрация...":"Зарегистрироваться"]})})]}),N=()=>e.jsxs("div",{children:[e.jsx("img",{className:"mx-auto h-12 w-auto",src:"/game-controller.svg",alt:"GameGold Logo"}),e.jsx("h2",{className:"mt-6 text-center text-3xl font-extrabold text-gray-900",children:"Создать аккаунт"}),e.jsxs("p",{className:"mt-2 text-center text-sm text-gray-600",children:["Или"," ",e.jsx(u,{to:"/login",className:"font-medium text-blue-600 hover:text-blue-500",children:"войдите"}),", если у вас уже есть аккаунт"]})]}),T=()=>{const t=f(),a=g(),{isLoading:o}=w(r=>r.auth),[s,l]=i.useState({name:"",email:"",password:"",confirmPassword:"",agreeToTerms:!1}),[c,m]=i.useState({}),p=()=>{const r={};return s.password.length<6&&(r.password="Пароль должен содержать минимум 6 символов"),s.password!==s.confirmPassword&&(r.confirmPassword="Пароли не совпадают"),s.agreeToTerms||(r.agreeToTerms="Необходимо принять условия использования"),m(r),Object.keys(r).length===0};return{formData:s,errors:c,isLoading:o,handleChange:r=>{const{name:n,value:x,type:h,checked:b}=r.target;l(d=>({...d,[n]:h==="checkbox"?b:x})),c[n]&&m(d=>({...d,[n]:""}))},handleSubmit:async r=>{if(r.preventDefault(),!!p())try{await t(j({name:s.name,email:s.email,password:s.password})).unwrap(),a("/")}catch{}}}},q=()=>{const{formData:t,errors:a,isLoading:o,handleChange:s,handleSubmit:l}=T();return e.jsx("div",{className:"min-h-[calc(100vh-4rem)] flex items-center justify-center py-12 px-4 sm:px-6 lg:px-8",children:e.jsxs("div",{className:"max-w-md w-full space-y-8",children:[e.jsx(N,{}),e.jsx(v,{formData:t,errors:a,isLoading:o,onChange:s,onSubmit:l})]})})};export{q as default};
