import{j as e,l,m as d,r as m}from"./react-vendor-BB4BkCfL.js";import{g as x,L as o}from"./index-DpTN90_E.js";import"./vendor-Dh_iZ00o.js";import"./redux-vendor-56JQh752.js";import"./mui-vendor-QnVK6N-v.js";const g=({items:s})=>e.jsx("div",{className:"space-y-4",children:s.map(t=>e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx("img",{src:t.game.image,alt:t.game.title,className:"h-16 w-16 object-cover rounded"}),e.jsxs("div",{className:"ml-4",children:[e.jsx("h4",{className:"text-sm font-medium text-gray-900",children:t.game.title}),e.jsxs("p",{className:"text-sm text-gray-500",children:["Количество: ",t.quantity]})]})]}),e.jsxs("span",{className:"text-sm font-medium text-gray-900",children:[(t.price*t.quantity).toLocaleString("ru-RU")," ₽"]})]},t.id))}),u=({items:s})=>e.jsxs("div",{className:"border-t border-gray-200 px-4 py-5 sm:px-6",children:[e.jsx("h4",{className:"text-sm font-medium text-gray-900 mb-4",children:"Ключи активации"}),e.jsx("div",{className:"space-y-2",children:s.map(t=>t.key&&e.jsxs("div",{className:"flex items-center justify-between bg-gray-50 p-3 rounded-md",children:[e.jsx("span",{className:"text-sm text-gray-600",children:t.game.title}),e.jsx("code",{className:"px-2 py-1 bg-gray-200 rounded text-sm font-mono",children:t.key})]},`${t.id}-key`))})]}),h=({order:s,formatDate:t,getStatusBadge:a})=>e.jsxs("div",{className:"bg-white shadow overflow-hidden sm:rounded-lg",children:[e.jsxs("div",{className:"px-4 py-5 sm:px-6 flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsxs("h3",{className:"text-lg leading-6 font-medium text-gray-900",children:["Заказ #",s.id]}),e.jsx("p",{className:"mt-1 max-w-2xl text-sm text-gray-500",children:t(s.createdAt)})]}),e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsxs("span",{className:"text-lg font-medium text-gray-900",children:[s.total.toLocaleString("ru-RU")," ₽"]}),a(s.status)]})]}),e.jsx("div",{className:"border-t border-gray-200",children:e.jsx("div",{className:"px-4 py-5 sm:p-6",children:e.jsx(g,{items:s.items})})}),s.status==="completed"&&s.items.some(r=>r.key)&&e.jsx(u,{items:s.items})]}),p=({orders:s,formatDate:t,getStatusBadge:a})=>s.length===0?e.jsxs("div",{className:"text-center py-12",children:[e.jsx("svg",{className:"mx-auto h-12 w-12 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"})}),e.jsx("h3",{className:"mt-2 text-sm font-medium text-gray-900",children:"Нет заказов"}),e.jsx("p",{className:"mt-1 text-sm text-gray-500",children:"У вас пока нет заказов."})]}):e.jsx("div",{className:"space-y-6",children:s.map(r=>e.jsx(h,{order:r,formatDate:t,getStatusBadge:a},r.id))}),j=()=>{const s=l(),{orders:t,isLoading:a}=d(n=>n.orders);return m.useEffect(()=>{s(x())},[s]),{orders:t,isLoading:a,formatDate:n=>new Date(n).toLocaleDateString("ru-RU",{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"}),getStatusBadge:n=>{const c={pending:{text:"В обработке",class:"bg-yellow-100 text-yellow-800"},processing:{text:"Обрабатывается",class:"bg-blue-100 text-blue-800"},completed:{text:"Выполнен",class:"bg-green-100 text-green-800"},cancelled:{text:"Отменен",class:"bg-red-100 text-red-800"}},i=c[n]||c.pending;return e.jsx("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${i.class}`,children:i.text})}}},L=()=>{const{orders:s,isLoading:t,formatDate:a,getStatusBadge:r}=j();return t?e.jsx(o,{}):e.jsxs("div",{className:"max-w-6xl mx-auto px-4 py-8",children:[e.jsx("h1",{className:"text-2xl font-bold mb-8",children:"Мои заказы"}),e.jsx(p,{orders:s,formatDate:a,getStatusBadge:r})]})};export{L as default};
