import{u as E,a as L,w as A,R as I,j as e,L as d,x as q,y as B,B as u}from"./index-DwH2koU-.js";import{A as C,I as a,L as P}from"./AuthLayout-BrBTBxDM.js";import{u as k}from"./index.esm-fdAhhs8f.js";import{c as F,a as p,o as R}from"./yup-D4ws8IoQ.js";import{B as c,a as x,b as T}from"./TextField-DxDDlAFJ.js";import{M as W}from"./mail-BUTMhzhL.js";import{I as M}from"./IconButton-DsQYPE88.js";import{E as $}from"./eye-off-Cx_2MjK-.js";import{E as D}from"./eye-RRX6OTpV.js";import"./Container-_yIFp-Is.js";const N=F({email:p().email("Введите корректный email").required("Email обязателен"),password:p().required("Пароль обязателен").min(6,"Пароль должен содержать минимум 6 символов")}).required();function Y(){var i,n;const h=E(),f=L(),j=A(),[r,g]=I.useState(!1),{register:o,handleSubmit:w,formState:{errors:s,isSubmitting:b}}=k({resolver:R(N)}),y=async S=>{var m,l;try{await h(q(S));const t=B.getState().auth.user,v=((l=(m=j.state)==null?void 0:m.from)==null?void 0:l.pathname)||((t==null?void 0:t.role)==="admin"?"/admin":"/");f(v,{replace:!0}),u.success("Вход выполнен успешно!")}catch(t){u.error(t.message||"Произошла ошибка при входе")}};return e.jsx(C,{title:"Вход в аккаунт",children:e.jsxs(c,{component:"form",onSubmit:w(y),noValidate:!0,sx:{mt:1},children:[e.jsx(x,{margin:"normal",required:!0,fullWidth:!0,id:"email",label:"Email",name:"email",autoComplete:"email",autoFocus:!0,InputProps:{startAdornment:e.jsx(a,{position:"start",children:e.jsx(W,{})})},...o("email"),error:!!s.email,helperText:(i=s.email)==null?void 0:i.message}),e.jsx(x,{margin:"normal",required:!0,fullWidth:!0,name:"password",label:"Пароль",type:r?"text":"password",id:"password",autoComplete:"current-password",InputProps:{startAdornment:e.jsx(a,{position:"start",children:e.jsx(P,{})}),endAdornment:e.jsx(a,{position:"end",children:e.jsx(M,{"aria-label":"toggle password visibility",onClick:()=>g(!r),edge:"end",children:r?e.jsx($,{}):e.jsx(D,{})})})},...o("password"),error:!!s.password,helperText:(n=s.password)==null?void 0:n.message}),e.jsx(T,{type:"submit",fullWidth:!0,variant:"contained",sx:{mt:3,mb:2},disabled:b,children:"Войти"}),e.jsxs(c,{sx:{display:"flex",justifyContent:"space-between"},children:[e.jsx(d,{to:"/register",variant:"body2",children:"Нет аккаунта? Зарегистрироваться"}),e.jsx(d,{to:"/forgot-password",variant:"body2",children:"Забыли пароль?"})]})]})})}export{Y as default};
