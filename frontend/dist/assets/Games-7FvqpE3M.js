import{j as e,l as f,m as S,r as b}from"./react-vendor-BB4BkCfL.js";import{f as P,L as B,s as G,a as F}from"./index-DpTN90_E.js";import{G as L}from"./GameCard-Nzd4ugO3.js";import{B as h,G as s,t as R,z as j,E as m,J as p,k as r,l as o,K as E,C as g,N as W}from"./mui-vendor-QnVK6N-v.js";import"./vendor-Dh_iZ00o.js";import"./redux-vendor-56JQh752.js";function X({filters:n,onFilterChange:t}){const l=c=>a=>{t({...n,[c]:a.target.value})},x=(c,a)=>{t({...n,priceRange:a})};return e.jsx(h,{sx:{mb:3},children:e.jsxs(s,{container:!0,spacing:3,children:[e.jsx(s,{item:!0,xs:12,sm:4,children:e.jsx(R,{fullWidth:!0,label:"Поиск игр",value:n.search,onChange:l("search"),variant:"outlined"})}),e.jsx(s,{item:!0,xs:12,sm:4,children:e.jsxs(j,{fullWidth:!0,children:[e.jsx(m,{children:"Платформа"}),e.jsxs(p,{value:n.platform,label:"Платформа",onChange:l("platform"),children:[e.jsx(r,{value:"",children:"Все"}),e.jsx(r,{value:"PC",children:"PC"}),e.jsx(r,{value:"PS5",children:"PlayStation 5"}),e.jsx(r,{value:"PS4",children:"PlayStation 4"}),e.jsx(r,{value:"XBOX",children:"Xbox Series X|S"}),e.jsx(r,{value:"SWITCH",children:"Nintendo Switch"})]})]})}),e.jsx(s,{item:!0,xs:12,sm:4,children:e.jsxs(j,{fullWidth:!0,children:[e.jsx(m,{children:"Сортировка"}),e.jsxs(p,{value:n.sortBy,label:"Сортировка",onChange:l("sortBy"),children:[e.jsx(r,{value:"popular",children:"По популярности"}),e.jsx(r,{value:"price_asc",children:"По возрастанию цены"}),e.jsx(r,{value:"price_desc",children:"По убыванию цены"}),e.jsx(r,{value:"rating",children:"По рейтингу"}),e.jsx(r,{value:"new",children:"По новизне"})]})]})}),e.jsxs(s,{item:!0,xs:12,children:[e.jsx(o,{gutterBottom:!0,children:"Цена (₽)"}),e.jsx(E,{value:n.priceRange,onChange:x,valueLabelDisplay:"auto",min:0,max:1e4,step:100}),e.jsxs(h,{display:"flex",justifyContent:"space-between",children:[e.jsxs(o,{variant:"body2",color:"text.secondary",children:[n.priceRange[0]," ₽"]}),e.jsxs(o,{variant:"body2",color:"text.secondary",children:[n.priceRange[1]," ₽"]})]})]})]})})}function N(){const n=f(),{games:t=[],isLoading:l,error:x,filters:c,pagination:{page:a,limit:d,total:u}}=S(i=>i.games);b.useEffect(()=>{n(P({page:a,limit:d,filters:c}))},[n,a,d,c]);const v=(i,C)=>{n(G(C))},y=i=>{n(F(i))};return l?e.jsx(B,{}):x?e.jsx(g,{children:e.jsx(h,{textAlign:"center",py:4,children:e.jsx(o,{color:"error",variant:"h6",children:x})})}):e.jsx(g,{children:e.jsxs(h,{py:4,children:[e.jsx(o,{variant:"h4",component:"h1",gutterBottom:!0,children:"Каталог игр"}),e.jsx(X,{filters:c,onFilterChange:y}),e.jsxs(s,{container:!0,spacing:3,mt:2,children:[t==null?void 0:t.map(i=>e.jsx(s,{item:!0,xs:12,sm:6,md:4,lg:3,children:e.jsx(L,{game:i})},i.id)),t.length===0&&!l&&e.jsx(s,{item:!0,xs:12,children:e.jsx(o,{textAlign:"center",color:"text.secondary",children:"Игры не найдены"})})]}),u>d&&e.jsx(h,{display:"flex",justifyContent:"center",mt:4,children:e.jsx(W,{count:Math.ceil(u/d),page:a,onChange:v,color:"primary"})})]})})}export{N as default};
